# Safe .htaccess (prevents redirect loops)
Options -Indexes -MultiViews

RewriteEngine On
RewriteBase /prathtech_website/

##########################
# EXTERNAL REDIRECTS (only if client actually requested the .html URL)
# Use THE_REQUEST to detect browser's original request and avoid loops
##########################

# Redirect /index.html -> /
RewriteCond %{THE_REQUEST} \s/index\.html[?\s] [NC]
RewriteRule ^index\.html$ / [R=301,L]

# Redirect specific old .html pages to new pretty URLs (only on real browser request)
RewriteCond %{THE_REQUEST} \s/ourservices\.html[?\s] [NC]
RewriteRule ^ourservices\.html$ /our-services [R=301,L]

RewriteCond %{THE_REQUEST} \s/about\.html[?\s] [NC]
RewriteRule ^about\.html$ /about-us [R=301,L]

RewriteCond %{THE_REQUEST} \s/career\.html[?\s] [NC]
RewriteRule ^career\.html$ /careers [R=301,L]

RewriteCond %{THE_REQUEST} \s/contact\.html[?\s] [NC]
RewriteRule ^contact\.html$ /contact-us [R=301,L]

RewriteCond %{THE_REQUEST} \s/privacy-policy\.html[?\s] [NC]
RewriteRule ^privacy-policy\.html$ /privacy-policy [R=301,L]

RewriteCond %{THE_REQUEST} \s/disclaimer\.html[?\s] [NC]
RewriteRule ^disclaimer\.html$ /disclaimer [R=301,L]

##########################
# PRETTY URL -> Serve actual files (internal rewrite)
##########################

# Serve root
RewriteRule ^$ index.html [L]

# Serve pretty pages internally
RewriteRule ^about-us/?$        about.html [L]
RewriteRule ^our-services/?$    ourservices.html [L]
RewriteRule ^careers/?$         career.html [L]
RewriteRule ^contact-us/?$      contact.html [L]
RewriteRule ^privacy-policy/?$  privacy-policy.html [L]
RewriteRule ^disclaimer/?$      disclaimer.html [L]

# Don't rewrite actual files or directories (serve assets normally)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

##########################
# Simple hotlink protection
##########################
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^https?://(www\.)?prathtech\.com [NC]
RewriteRule \.(jpe?g|png|gif|svg|webp)$ - [F,NC,L]

##########################
# Basic caching (if mod_expires enabled)
##########################
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType text/html "access plus 1 hour"
</IfModule>
